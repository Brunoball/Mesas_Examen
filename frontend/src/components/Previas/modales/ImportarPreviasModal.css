/* ===== Overlay & container ===== */
.ipm-overlay {
  position: fixed;
  inset: 0;
  background: rgba(33,33,33,.35);
  backdrop-filter: blur(2px);
  display: grid;
  place-items: center;
  z-index: 9999;
}

.ipm-container {
  width: min(1120px, 96vw);
  max-height: 88vh;
  overflow: auto;
  background: var(--surface-color, #fff);
  border-radius: var(--pro-border-radius-lg, 16px);
  box-shadow: var(--pro-shadow-xl);
  padding: 24px 28px;
  border: 1px solid var(--pro-gray-200);
  animation: ipm-pop .18s ease-out;

  /* GRID PRINCIPAL: mobile apila, desktop dos columnas para specs/drop */
  display: grid;
  grid-template-columns: 1fr;
  grid-template-areas:
    "header"
    "specs"
    "drop"
    "note"
    "errors"
    "preview"
    "actions";
  row-gap: 16px;
}

@keyframes ipm-pop { from { transform: scale(.98); opacity: .6; } to { transform: scale(1); opacity: 1; } }

/* ===== Header ===== */
.ipm-header {
  grid-area: header;
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 14px;
}

.ipm-icon-circle {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  color: var(--text-on-primary);
  background: var(--gradient-primary);
  box-shadow: var(--pro-shadow-md);
}
.ipm-icon-circle svg { font-size: 18px; }

.ipm-header-texts h3 {
  margin: 0;
  font-weight: 700;
  color: var(--text-primary);
  font-size: 1.25rem;
}
.ipm-sub { margin: 2px 0 0; color: var(--text-secondary); font-size: .95rem; }

.ipm-close {
  background: transparent; border: 0; color: var(--pro-gray-600);
  width: 36px; height: 36px; border-radius: 50%;
  display: grid; place-items: center; transition: var(--pro-transition);
}
.ipm-close:hover { background: var(--pro-gray-100); color: var(--pro-dark); }

/* ===== Columna de Requisitos (izquierda) ===== */
.ipm-specs-col { grid-area: specs; }
.ipm-specs-title {
  margin: 0 0 8px 0;
  color: var(--text-primary);
  font-size: 1rem;
  font-weight: 700;
}

/* Caja de requisitos (sin t√≠tulo adentro) */
.ipm-specs {
  border: 1px dashed var(--pro-gray-300);
  border-radius: 12px;
  padding: 14px 16px;
  background: #fff;
}
.ipm-specs ul {
  margin: 0 0 0 18px;
  padding: 0;
  color: var(--text-secondary);
}
.ipm-specs li { margin:  0; }
.ipm-specs code { background: var(--pro-gray-100); padding: 1px 6px; border-radius: 6px; }

/* ===== Dropzone (derecha) ===== */
.ipm-drop {
  grid-area: drop;
  border: 2px dashed var(--border-color, var(--pro-red-200));
  background: var(--pro-gray-50);
  border-radius: var(--pro-border-radius, 12px);
  padding: 28px 18px;
  display: grid; place-items: center; text-align: center; gap: 8px;
  transition: var(--pro-transition);
  outline: none;
}
.ipm-drop:hover {
  background: var(--pro-red-50);
  border-color: var(--primary-500);
  box-shadow: inset 0 0 0 2px var(--pro-red-50);
}
.ipm-drop-ico {
  width: 52px; height: 52px; border-radius: 50%;
  display: grid; place-items: center;
  background: #fff; color: var(--primary-500);
  box-shadow: var(--pro-shadow-sm); margin-bottom: 2px;
}
.ipm-drop-ico svg { font-size: 20px; }
.ipm-drop-title { margin: 4px 0 0 0; font-weight: 600; color: var(--text-primary); }
.ipm-file-btn { cursor: pointer; color: var(--text-secondary); }
.ipm-file-link { color: var(--primary-500); text-decoration: underline; margin-left: 4px; }
.ipm-types { margin: 2px 0 0; font-size: .9rem; color: var(--text-muted); }
.ipm-file-name {
  margin-top: 8px; padding: 6px 10px; background: #fff;
  border: 1px solid var(--pro-gray-200); border-radius: 10px;
  color: var(--text-secondary); max-width: 100%; overflow: hidden; text-overflow: ellipsis;
}

/* ===== Nota fuera de la caja, 100% width bajo las columnas ===== */
.ipm-note-wide {
  grid-area: note;
  color: var(--text-secondary);
  margin: 0;          /* pegada al bloque anterior */
}
.ipm-note-wide code { background: var(--pro-gray-100); padding: 1px 6px; border-radius: 6px; }

/* ===== Errores (fila completa) ===== */
.ipm-errors { grid-area: errors; border: 1px solid var(--danger-200); background: var(--danger-50); color: var(--danger-600); border-radius: 12px; padding: 12px 14px; }
.ipm-errors-box {
  margin-top: 6px; max-height: 240px; overflow: auto;
  background: rgba(255,255,255,.65); border: 1px dashed var(--danger-200);
  border-radius: 8px; padding: 8px 10px;
}

/* ===== Preview ===== */
.ipm-preview { grid-area: preview; color: var(--text-primary); }
.ipm-table { margin-top: 8px; border: 1px solid var(--pro-gray-200); border-radius: 10px; overflow: hidden; }
.ipm-tr { display: grid; grid-template-columns: repeat(10, minmax(0,1fr)); }
.ipm-head { background: var(--pro-gray-100); font-weight: 600; color: var(--text-secondary); }
.ipm-td { padding: 8px 10px; border-bottom: 1px solid var(--pro-gray-200); font-size: .92rem; }
.ipm-tr:last-child .ipm-td { border-bottom: 0; }

/* ===== Acciones ===== */
.ipm-actions { grid-area: actions; display: flex; justify-content: flex-end; gap: 10px; }
.ipm-btn {
  appearance: none; border: 1px solid transparent; padding: 10px 16px;
  border-radius: 10px; font-weight: 600; cursor: pointer; transition: var(--pro-transition);
  box-shadow: var(--pro-shadow-sm);
}
.ipm-secondary { background: #fff; border-color: var(--pro-gray-300); color: var(--text-primary); }
.ipm-secondary:hover { background: var(--pro-gray-100); }
.ipm-primary { color: var(--text-on-primary); background: var(--gradient-primary); border-color: var(--primary-600); }
.ipm-primary:hover { filter: brightness(0.98); transform: translateY(-1px); box-shadow: var(--pro-shadow-md); }
.ipm-btn:disabled { opacity: .6; cursor: not-allowed; transform: none; box-shadow: none; }

/* ===== Desktop: dos columnas (Requisitos IZQ, Subir DER) y nota abajo a 100% ===== */
@media (min-width: 1000px) {
  .ipm-container {
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "header  header"
      "specs   drop"
      "note    note"
      "errors  errors"
      "preview preview"
      "actions actions";
    column-gap: 16px;
  }

  /* Scroll internos para que no estiren el modal */
  .ipm-specs,
  .ipm-drop { max-height: 260px; overflow: auto; }

  .ipm-table { max-height: 42vh; overflow: auto; }
}
