/* ============================
   ModalAgregar.css (tema rojo con header blanco)
   + Animaciones y hover de la X iguales al InfoPrevia
   ============================ */

/* Paleta base */
:root {
  --bg: #ffffff;
  --surface: #f8fafc;
  --surface-2: #eef2f7;

  --text: #0f172a;
  --text-soft: #475569;
  --muted: #64748b;

  --border: #d4d8e1;
  --border-strong: #c1c7d0;

  /* ======= Marca roja ======= */
  --brand: #b71c1c;
  --brand-700: #9c1515;
  --brand-800: #820f0f;
  --brand-soft: #fdecec;

  --primary: #b71c1c;
  --primary-strong: #9c1515;
  --primary-soft: #fdecec;

  --danger: #b00020;

  --overlay: rgba(15, 23, 42, .55);
  --shadow: 0 16px 50px rgba(2, 6, 23, .15);
  --radius: 14px;

  --focus: 0 0 0 3px rgba(183, 28, 28, .25);
  --font: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
}

/* Overlay y tarjeta */
.ma-overlay {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: grid;
  place-items: center;
  font-family: var(--font);
  color: var(--text);
}

/* Backdrop con fade como el InfoPrevia */
.ma-backdrop {
  position: fixed;
  inset: 0;
  background: var(--overlay);
  backdrop-filter: blur(1.5px);
  animation: ma-fade .15s ease-out;
}

/* Tarjeta con slide-in como el InfoPrevia */
.ma-card {
  position: relative;
  width: 720px;
  min-height: 90vh;
  max-height: 90vh;
  background: var(--bg);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 1001;
  border: 1px solid var(--border);
  animation: ma-slide .2s ease-out; /* <- efecto de aparición */
}

/* ========= HEADER ========= */
.ma-header {
  position: relative;
  display: grid;
  grid-template-columns: 1fr auto auto;
  align-items: center;
  gap: 12px;
  padding: 16px 18px;
  border-bottom: 1px solid var(--border-strong);
}

/* Header rojo (estilo marca) */
.ma-header--brand {
  border-bottom: none;
  background: var(--accent-red);
  color: #fff;
}
.ma-header--brand h2,
.ma-header--brand .ma-h2-icon { color: #fff; }
.ma-header--brand .ma-badge {
  background: transparent;
  color: #fff;
  border: 1px solid rgba(255,255,255,.65);
}
.ma-header--brand .ma-badge .dot { background: #fff; box-shadow: none; }
.ma-header--brand .ma-close {
  color: #fff;
  border-color: rgba(255, 255, 255, .55);
}
/* Hover de la X: rotación 90° como InfoPrevia */
.ma-header--brand .ma-close:hover {
  background: rgba(255, 255, 255, .14);
  border-color: rgba(255, 255, 255, .75);
  transform: rotate(90deg);
}

/* Título e ícono */
.ma-header h2 {
  margin: 0;
  font-size: 1.15rem;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  letter-spacing: .2px;
}
.ma-h2-icon { font-size: 1.05rem; }

/* Badge */
.ma-badge {
  justify-self: end;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  font-size: .9rem;
  background: var(--surface);
  color: var(--text);
}
.ma-badge .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  display: inline-block;
}

/* Botón cerrar (X) con transición + rotación en hover */
.ma-close {
  justify-self: end;
  background: transparent;
  border: none;
  font-size: 20px;
  line-height: 1;
  width: 34px;
  height: 34px;
  border-radius: 8px;
  cursor: pointer;
  display: grid;
  place-items: center;
  /* igual que InfoPrevia: transición de transform y background */
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}
.ma-close:hover {
  background: var(--surface-2);
  transform: rotate(90deg); /* <- efecto de giro */
}
.ma-close:active { transform: rotate(90deg) scale(.98); }

/* Subtítulo */
.ma-sub {
  padding: 10px 18px;
  color: var(--text-soft);
  border-bottom: 1px solid var(--border);
  background: var(--surface);
}
.ma-sub strong { color: var(--text); }

/* Buscador */
.ma-search {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 18px;
  border-bottom: 1px solid var(--border);
}
.ma-search .ma-search-icon {
  opacity: .9;
  font-size: 16px;
  color: var(--muted);
}
.ma-search input {
  flex: 1;
  padding: 11px 12px;
  border: 1px solid var(--border-strong);
  border-radius: 10px;
  outline: none;
  background: var(--bg);
  transition: border-color .15s ease, box-shadow .15s ease;
}
.ma-search input:focus {
  border-color: var(--primary-strong);
  box-shadow: var(--focus);
}

/* Lista */
.ma-body { overflow: hidden; background: var(--bg); }
.ma-list {
  list-style: none;
  margin: 0;
  padding: 0;
  max-height: 55vh;
  overflow: auto;
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}
.ma-list li {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 18px;
  cursor: pointer;
  border-bottom: 1px solid var(--border);
  transition: background .12s ease;
}
.ma-list li:hover { background: var(--surface-2); }
.ma-list li.sel {
  background: var(--brand-soft);
  outline: 1px solid color-mix(in oklab, var(--brand) 40%, transparent);
}
.ma-list .dot { color: var(--brand-700); }
.ma-list .name { flex: 1; font-weight: 500; }

/* Acciones */
.ma-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 12px 16px;
  border-top: 1px solid var(--border-strong);
  background: var(--surface);
}

/* Botones */
.ma-btn {
  border: 1px solid var(--border-strong);
  cursor: pointer;
  padding: 10px 14px;
  border-radius: 10px;
  background: var(--bg);
  color: var(--text);
  transition: background .15s ease, border-color .15s ease, transform .05s ease;
}
.ma-btn:hover { background: var(--surface-2); }
.ma-btn.primary {
  background: var(--primary);
  border-color: var(--primary-strong);
  color: #fff;
  font-weight: 600;
}
.ma-btn.primary:hover { background: var(--primary-strong); }
.ma-btn.primary:disabled { opacity: .7; cursor: not-allowed; }

/* ====== Animaciones (copiadas del InfoPrevia) ====== */
@keyframes ma-fade {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes ma-slide {
  from { opacity: 0; transform: translateY(14px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ===== Tamaño fijo de la sección de lista =====
   Ajustá --list-h a gusto. Si querés que sea 420px SIEMPRE, dejalo así.
*/
:root {
  --list-h: 420px;          /* altura fija de la lista */
  --stagger: 40ms;          /* demora entre items del efecto cascada */
}

/* La sección ma-list ahora tiene altura fija */
.ma-body { overflow: hidden; background: var(--bg); }

.ma-list {
  list-style: none;
  margin: 0;
  padding: 0;
  height: var(--list-h);     /* <— altura fija */
  max-height: none;          /* anulamos el tope anterior */
  overflow: auto;
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}

/* Estado y estilos existentes (sin cambios) */
.ma-list li {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 18px;
  cursor: pointer;
  border-bottom: 1px solid var(--border);
  transition: background .12s ease;
}
.ma-list li:hover { background: var(--surface-2); }
.ma-list li.sel {
  background: var(--brand-soft);
  outline: 1px solid color-mix(in oklab, var(--brand) 40%, transparent);
}
.ma-list .dot { color: var(--brand-700); }
.ma-list .name { flex: 1; font-weight: 500; }

/* ===== Efecto cascada para los PRIMEROS 12 elementos ===== */
@keyframes ma-item-in {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* Solo cuando tiene la clase "is-appear" (se activa desde React) */
.ma-list.is-appear li {
  opacity: 0;                 /* estado inicial */
  transform: translateY(6px); /* estado inicial */
  animation: ma-item-in .28s ease forwards;
}

/* Stagger en los primeros 12 */
.ma-list.is-appear li:nth-child(1)  { animation-delay: calc(var(--stagger) * 0); }
.ma-list.is-appear li:nth-child(2)  { animation-delay: calc(var(--stagger) * 1); }
.ma-list.is-appear li:nth-child(3)  { animation-delay: calc(var(--stagger) * 2); }
.ma-list.is-appear li:nth-child(4)  { animation-delay: calc(var(--stagger) * 3); }
.ma-list.is-appear li:nth-child(5)  { animation-delay: calc(var(--stagger) * 4); }
.ma-list.is-appear li:nth-child(6)  { animation-delay: calc(var(--stagger) * 5); }
.ma-list.is-appear li:nth-child(7)  { animation-delay: calc(var(--stagger) * 6); }
.ma-list.is-appear li:nth-child(8)  { animation-delay: calc(var(--stagger) * 7); }
.ma-list.is-appear li:nth-child(9)  { animation-delay: calc(var(--stagger) * 8); }
.ma-list.is-appear li:nth-child(10) { animation-delay: calc(var(--stagger) * 9); }
.ma-list.is-appear li:nth-child(11) { animation-delay: calc(var(--stagger) * 10); }
.ma-list.is-appear li:nth-child(12) { animation-delay: calc(var(--stagger) * 11); }

/* Del 13 en adelante aparecen sin delay (o podés dejarlos sin animación) */
.ma-list.is-appear li:nth-child(n+13) {
  opacity: 1;
  transform: none;
  animation: none;
}
